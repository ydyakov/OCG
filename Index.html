<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8" />
    <title>Космическа совалка - Three.js</title>
    <style>
        body {
            margin: 0;
            background-color: black;
            overflow: hidden;
        }
    </style>
    <script type="importmap">
        {
          "imports": {
            "three": "https://unpkg.com/three@0.166.1/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.166.1/examples/jsm/"
          }
        }
    </script>
</head>
<body>
    <script type="module">
        import * as THREE from "three";

        const scene = new THREE.Scene();

        const camera = new THREE.PerspectiveCamera(
            60, window.innerWidth / window.innerHeight, 0.1, 1000
        );
        camera.position.z = 5;

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

    

     
     


        var buster = createBooster(0.3, 3);
        scene.add(buster);

        // *********** functions ************************

        function createBooster(r, h) {
            const booster = new THREE.Group();

            // Материали
            const matMain = new THREE.MeshPhongMaterial({ color: 0xffffff });
            const matTip = new THREE.MeshPhongMaterial({ color: 0xdddddd });
            const matBottomOut = new THREE.MeshPhongMaterial({ color: 0xff6600, side: THREE.FrontSide });
            const matBottomIn = new THREE.MeshPhongMaterial({ color: 0x222222, side: THREE.BackSide });

            // --- Цилиндър (основно тяло)
            const cylGeom = new THREE.CylinderGeometry(r, r, h, 32);
            const cyl = new THREE.Mesh(cylGeom, matMain);
            booster.add(cyl);

            // --- Горен конус (върхът)
            const coneGeom = new THREE.ConeGeometry(r , r * 1.2, 32);
            const cone = new THREE.Mesh(coneGeom, matTip);
            cone.position.y = h / 2 + (r * 1.2) / 2; // поставяме го върху цилиндъра
            booster.add(cone);

            // --- Долен пресечен конус (дюзата)
            const engingGeom = new THREE.CylinderGeometry(r * 0.7, r * 1.2, r, 32, 1, true);
            const engingGeomMeshOut = new THREE.Mesh(engingGeom, matBottomOut);
            const engingGeomMeshIn = new THREE.Mesh(engingGeom, matBottomIn);
            const enginGroup = new THREE.Group();
            enginGroup.add(engingGeomMeshOut);
            enginGroup.add(engingGeomMeshIn);
                   
            enginGroup.position.y = -h / 2 - (r) / 2; // под цилиндъра

            booster.add(enginGroup);

            return booster;
        }


        // *************************************
        import { OrbitControls } from "three/addons/controls/OrbitControls.js";

        // Добави това след като създадеш camera и renderer
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true; // по-плавно движение
        controls.dampingFactor = 0.05;

        animate();

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        window.addEventListener("resize", () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
